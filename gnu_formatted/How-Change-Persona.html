<a name="How-Change-Persona"></a>
<div class="header">
<p>
Next: <a href="Reading-Persona.html#Reading-Persona" accesskey="n" rel="next">Reading Persona</a>, Previous: <a href="Why-Change-Persona.html#Why-Change-Persona" accesskey="p" rel="prev">Why Change Persona</a>, Up: <a href="Users-and-Groups.html#Users-and-Groups" accesskey="u" rel="up">Users and Groups</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="How-an-Application-Can-Change-Persona"></a>
<h3 class="section">30.4 How an Application Can Change Persona</h3>
<a name="index-setuid-programs"></a>
<a name="index-saved-set_002duser_002dID"></a>
<a name="index-saved-set_002dgroup_002dID"></a>
<a name="index-_005fPOSIX_005fSAVED_005fIDS"></a>

<p>The ability to change the persona of a process can be a source of
unintentional privacy violations, or even intentional abuse.  Because of
the potential for problems, changing persona is restricted to special
circumstances.
</p>
<p>You can&rsquo;t arbitrarily set your user ID or group ID to anything you want;
only privileged processes can do that.  Instead, the normal way for a
program to change its persona is that it has been set up in advance to
change to a particular user or group.  This is the function of the setuid
and setgid bits of a file&rsquo;s access mode.  See <a href="Permission-Bits.html#Permission-Bits">Permission Bits</a>.
</p>
<p>When the setuid bit of an executable file is on, executing that file
gives the process a third user ID: the <em>file user ID</em>.  This ID is
set to the owner ID of the file.  The system then changes the effective
user ID to the file user ID.  The real user ID remains as it was.
Likewise, if the setgid bit is on, the process is given a <em>file
group ID</em> equal to the group ID of the file, and its effective group ID
is changed to the file group ID.
</p>
<p>If a process has a file ID (user or group), then it can at any time
change its effective ID to its real ID and back to its file ID.
Programs use this feature to relinquish their special privileges except
when they actually need them.  This makes it less likely that they can
be tricked into doing something inappropriate with their privileges.
</p>
<p><strong>Portability Note:</strong> Older systems do not have file IDs.
To determine if a system has this feature, you can test the compiler
define <code>_POSIX_SAVED_IDS</code>.  (In the POSIX standard, file IDs are
known as saved IDs.)
</p>
<p>See <a href="File-Attributes.html#File-Attributes">File Attributes</a>, for a more general discussion of file modes and
accessibility.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Reading-Persona.html#Reading-Persona" accesskey="n" rel="next">Reading Persona</a>, Previous: <a href="Why-Change-Persona.html#Why-Change-Persona" accesskey="p" rel="prev">Why Change Persona</a>, Up: <a href="Users-and-Groups.html#Users-and-Groups" accesskey="u" rel="up">Users and Groups</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>



