<a name="Variadic-Example"></a>
<div class="header">
<p>
Previous: <a href="How-Variadic.html#How-Variadic" accesskey="p" rel="prev">How Variadic</a>, Up: <a href="Variadic-Functions.html#Variadic-Functions" accesskey="u" rel="up">Variadic Functions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Example-of-a-Variadic-Function"></a>
<h4 class="subsection">A.2.3 Example of a Variadic Function</h4>

<p>Here is a complete sample function that accepts a variable number of
arguments.  The first argument to the function is the count of remaining
arguments, which are added up and the result returned.  While trivial,
this function is sufficient to illustrate how to use the variable
arguments facility.
</p>
<div class="smallexample">
<pre class="smallexample">
#include &lt;stdarg.h&gt;
#include &lt;stdio.h&gt;

int
add_em_up (int count,...)
{
  va_list ap;
  int i, sum;

  va_start (ap, count);         /* <span class="roman">Initialize the argument list.</span> */

  sum = 0;
  for (i = 0; i &lt; count; i++)
    sum += va_arg (ap, int);    /* <span class="roman">Get the next argument value.</span> */

  va_end (ap);                  /* <span class="roman">Clean up.</span> */
  return sum;
}

int
main (void)
{
  /* <span class="roman">This call prints 16.</span> */
  printf (&quot;%d\n&quot;, add_em_up (3, 5, 5, 6));

  /* <span class="roman">This call prints 55.</span> */
  printf (&quot;%d\n&quot;, add_em_up (10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10));

  return 0;
}
</pre></div>




